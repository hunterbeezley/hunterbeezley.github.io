<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hunter Beezley Scramble</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        canvas {
            border: 1px solid #000;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            CELL_SIZE = Math.min(canvas.width, canvas.height) / 20;
            GRID_SIZE = Math.floor(Math.min(canvas.width, canvas.height) / CELL_SIZE);
        }

        // Call resizeCanvas initially and on window resize
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        let CELL_SIZE;
        let GRID_SIZE;
        const EMPTY_CELL = 0;

        let grid = [];
        let emptyCell = { row: 0, col: 0 };

        function initializeGrid() {
            grid = [];
            for (let i = 0; i < GRID_SIZE; i++) {
                grid[i] = [];
                for (let j = 0; j < GRID_SIZE; j++) {
                    grid[i][j] = i * GRID_SIZE + j + 1;
                }
            }
            grid[GRID_SIZE - 1][GRID_SIZE - 1] = EMPTY_CELL;
            emptyCell = { row: GRID_SIZE - 1, col: GRID_SIZE - 1 };
        }

        function drawGrid() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < GRID_SIZE; i++) {
                for (let j = 0; j < GRID_SIZE; j++) {
                    if (grid[i][j] !== EMPTY_CELL) {
                        ctx.fillStyle = '#3498db';
                        ctx.fillRect(j * CELL_SIZE, i * CELL_SIZE, CELL_SIZE - 1, CELL_SIZE - 1);
                        ctx.fillStyle = '#ffffff';
                        ctx.font = `${CELL_SIZE / 2}px Arial`;
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'middle';
                        ctx.fillText(grid[i][j], j * CELL_SIZE + CELL_SIZE / 2, i * CELL_SIZE + CELL_SIZE / 2);
                    }
                }
            }
        }

        function shuffleGrid() {
            for (let i = 0; i < 1000; i++) {
                const directions = [
                    { dr: -1, dc: 0 },
                    { dr: 1, dc: 0 },
                    { dr: 0, dc: -1 },
                    { dr: 0, dc: 1 }
                ];
                const randomDirection = directions[Math.floor(Math.random() * directions.length)];
                const newRow = emptyCell.row + randomDirection.dr;
                const newCol = emptyCell.col + randomDirection.dc;

                if (newRow >= 0 && newRow < GRID_SIZE && newCol >= 0 && newCol < GRID_SIZE) {
                    grid[emptyCell.row][emptyCell.col] = grid[newRow][newCol];
                    grid[newRow][newCol] = EMPTY_CELL;
                    emptyCell.row = newRow;
                    emptyCell.col = newCol;
                }
            }
        }

        function handleClick(event) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const mouseY = event.clientY - rect.top;
            const clickedRow = Math.floor(mouseY / CELL_SIZE);
            const clickedCol = Math.floor(mouseX / CELL_SIZE);

            if (
                (Math.abs(clickedRow - emptyCell.row) === 1 && clickedCol === emptyCell.col) ||
                (Math.abs(clickedCol - emptyCell.col) === 1 && clickedRow === emptyCell.row)
            ) {
                grid[emptyCell.row][emptyCell.col] = grid[clickedRow][clickedCol];
                grid[clickedRow][clickedCol] = EMPTY_CELL;
                emptyCell.row = clickedRow;
                emptyCell.col = clickedCol;
                drawGrid();
                checkWin();
            }
        }

        function checkWin() {
            for (let i = 0; i < GRID_SIZE; i++) {
                for (let j = 0; j < GRID_SIZE; j++) {
                    if (i === GRID_SIZE - 1 && j === GRID_SIZE - 1) {
                        if (grid[i][j] !== EMPTY_CELL) {
                            return;
                        }
                    } else if (grid[i][j] !== i * GRID_SIZE + j + 1) {
                        return;
                    }
                }
            }
            alert('Congratulations! You won!');
        }

        canvas.addEventListener('click', handleClick);

        initializeGrid();
        shuffleGrid();
        drawGrid();
    </script>
</body>
</html>
